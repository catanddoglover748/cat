# -*- coding: utf-8 -*-
"""Untitled4.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1qAfV8Yw1EqnHdbFzrKxnEcFLqQoPGY4i
"""

# streamlit_app.py

import streamlit as st

st.title("ã“ã‚“ã«ã¡ã¯ï¼")
st.write("ã“ã‚Œã¯æœ€åˆã®Streamlitã‚¢ãƒ—ãƒªã§ã™ã€‚")
import streamlit as st
import yfinance as yf
import matplotlib.pyplot as plt
from datetime import datetime, timedelta

# ã‚¿ã‚¤ãƒˆãƒ«
st.title("ğŸ“ˆ æ ªä¾¡ãƒãƒ£ãƒ¼ãƒˆï¼†AIäºˆæ¸¬ãƒ‡ãƒ¢")

# æ ªä¾¡ã‚³ãƒ¼ãƒ‰ã®å…¥åŠ›
ticker = st.text_input("ãƒ†ã‚£ãƒƒã‚«ãƒ¼ã‚·ãƒ³ãƒœãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šAAPL, MSFT, TSLAï¼‰", "AAPL")

# æ—¥ä»˜ç¯„å›²ã®é¸æŠ
days = st.slider("ä½•æ—¥åˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¾ã™ã‹ï¼Ÿ", 30, 365, 180)

# ãƒ‡ãƒ¼ã‚¿å–å¾—
if ticker:
    end_date = datetime.today()
    start_date = end_date - timedelta(days=days)

    try:
        data = yf.download(ticker, start=start_date, end=end_date)
        st.write(f"è¡¨ç¤ºä¸­ï¼š{ticker} ã®æ ªä¾¡ãƒ‡ãƒ¼ã‚¿ï¼ˆ{start_date.date()}ï½{end_date.date()}ï¼‰")

        # ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º
        fig, ax = plt.subplots()
        ax.plot(data.index, data['Close'], label='çµ‚å€¤')
        ax.set_title(f"{ticker} æ ªä¾¡ãƒãƒ£ãƒ¼ãƒˆ")
        ax.set_xlabel("æ—¥ä»˜")
        ax.set_ylabel("ä¾¡æ ¼ï¼ˆUSDï¼‰")
        ax.legend()
        st.pyplot(fig)

    except Exception as e:
        st.error(f"ãƒ‡ãƒ¼ã‚¿å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ: {e}")
import streamlit as st
import yfinance as yf

st.title("æ ªä¾¡ãƒãƒ£ãƒ¼ãƒˆãƒ“ãƒ¥ãƒ¼ã‚¢")

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ†ã‚£ãƒƒã‚«ãƒ¼ã¨æœŸé–“ã‚’å…¥åŠ›ã•ã›ã‚‹
ticker = st.text_input("ãƒ†ã‚£ãƒƒã‚«ãƒ¼ã‚·ãƒ³ãƒœãƒ«ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆä¾‹ï¼šAAPLã€GOOGã€MSFTï¼‰", "AAPL")

# æœŸé–“ã®é¸æŠè‚¢ã‚’è¿½åŠ 
period = st.selectbox(
    "è¡¨ç¤ºæœŸé–“ã‚’é¸æŠã—ã¦ãã ã•ã„",
    ("1mo", "3mo", "6mo", "1y", "2y", "5y", "10y", "max"),
    index=2  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã€Œ6ãƒ¶æœˆã€
)

# æ ªä¾¡ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦è¡¨ç¤º
if ticker:
    try:
        data = yf.Ticker(ticker).history(period=period)
        if not data.empty:
            st.subheader(f"{ticker} ã® {period} ã®çµ‚å€¤ãƒãƒ£ãƒ¼ãƒˆ")
            st.line_chart(data['Close'])
        else:
            st.warning("ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ãƒ†ã‚£ãƒƒã‚«ãƒ¼ãŒæ­£ã—ã„ã‹ç¢ºèªã—ã¦ãã ã•ã„ã€‚")
    except Exception as e:
        st.error(f"ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ: {e}")
